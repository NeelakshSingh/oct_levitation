<launch>
    <arg name="data_subfolder"/>
    <arg name="sim" default="false"/>
    <arg name="experiment_folder" default=""/>
    <arg name="summarize" default="false"/>
    <arg name="note_observations" default="true"/>
    <arg name="disable_plots" default="false" />
    
    <rosparam command="load" file="$(find oct_levitation)/config/experiment_analysis_params.yaml"/>
    <rosparam command="load" file="$(find oct_levitation)/config/general_params.yaml"/>

    <group unless="$(arg summarize)">
        <node pkg="oct_levitation" name="experiment_analysis_node" type="experiment_analysis.py" output="screen">
            <param name="data_subfolder" value="$(arg data_subfolder)"/>
            <param name="experiment_folder" value="$(arg experiment_folder)"/>
            <param name="sim" value="$(arg sim)"/>
            <param name="note_observations" value="$(arg note_observations)"/>
            <param name="disable_plots" value="$(arg disable_plots)"/>
        </node>
    </group>

    <group if="$(arg summarize)">
        <node pkg="oct_levitation" name="experiment_summarizer_node" type="experiment_data_summarizer.py" output="screen">
            <param name="data_subfolder" value="$(arg data_subfolder)"/>
            <param name="sim" value="$(arg sim)"/>
        </node>
    </group>
</launch>